# Node.js MCP Client for Gemini (Generated by Codex Omega)

This application allows you to interact with Google's Gemini model, enabling Gemini to use tools provided by local Model Context Protocol (MCP) servers. It is inspired by concepts from the Roo Code extension and your provided reference.

## Core Functionality

* Connects to MCP servers defined in `mcp-config.json`.
* Discovers available tools from these MCP servers.
* Constructs a system prompt for Gemini, informing it about available tools and the XML-like syntax to invoke them.
* Manages a chat session with the Gemini API.
* Parses Gemini's responses to detect tool call requests (e.g., `<use_mcp_tool>...</use_mcp_tool>`).
* Executes detected tool calls on the appropriate MCP server.
* Feeds the tool's result back to Gemini to continue the conversation.

## Setup

1.  **Prerequisites:**
    * Node.js (LTS version recommended, e.g., 18.x or later)
    * npm (comes with Node.js)

2.  **Clone/Download:**
    * Place all generated files into a directory (e.g., `mcp_gemini_client_omega`).

3.  **Install Dependencies:**
    * Navigate to the application directory: `cd mcp_gemini_client_omega`
    * Run: `npm install`

4.  **Configure Gemini API Key:**
    * Create a `.env` file in the root of the `mcp_gemini_client_omega` directory.
    * Add your Gemini API key to it:
        ```env
        GEMINI_API_KEY=your_actual_gemini_api_key_here
        ```
    * **SECURITY WARNING:** Ensure the `.env` file (containing your API key) is NEVER committed to version control. Add `.env` to your `.gitignore` file if you initialize a git repository.

5.  **Configure MCP Servers:**
    * Edit the `mcp-config.json` file in the root of the `mcp_gemini_client_omega` directory.
    * Define the MCP servers you want the client to connect to. Each server entry requires a `command` and `args` to start the server process. You can also specify `env` variables, a `timeout` for tool calls, and a `disabled` flag.
    * Example `mcp-config.json`:
        ```json
        {
          "mcpServers": {
            "filesystem-server": {
              "command": "npx",
              "args": ["-y", "@modelcontextprotocol/server-filesystem", "/tmp/mcp_fs_test"],
              "env": {},
              "disabled": false,
              "timeout": 60
            }
          }
        }
        ```
        *Make sure the path for `server-filesystem` (e.g., `/tmp/mcp_fs_test`) exists and is accessible, or change it to a suitable directory on your system.* You may need to install the example server globally first if `npx` has issues: `npm install -g @modelcontextprotocol/server-filesystem`.

## Running the Client

* Navigate to the application directory: `cd mcp_gemini_client_omega`
* Run: `node src/main.js`
* You will see a "Chat with Gemini..." prompt. Type your messages.
* To instruct Gemini to use an MCP tool, phrase your request accordingly. For example, if you have the `filesystem-server` configured with a `list_files` tool: "Gemini, please use the list_files tool on the filesystem-server to list files in the /tmp/mcp_fs_test directory."
* Type `quit` to exit the application.
* Type `history` to see the current chat history with Gemini.

## AI Generation & Validation Notice

This codebase was generated by Codex Omega, an AI persona. While designed for completeness, security, and functionality based on the Genesis Mandate and a rigorous internal process (including efficiency bias counteraction and risk annihilation), it is **imperative** that you, the user, perform thorough review, testing, and validation before using this application for any critical purpose.

* Review the code for any potential security vulnerabilities.
* Test all functionalities extensively.
* Verify that API key handling meets your security standards.
* Understand the behavior of any MCP servers you connect.

Codex Omega's existence is predicated on generating functional code, but the ultimate responsibility for deployment and use rests with the human operator.

## Project Structure

```
mcp_gemini_client_omega/
├── package.json            # NPM package configuration and dependencies
├── mcp-config.json         # Configuration for your MCP servers
├── .env                    # For Gemini API key (you create this)
├── README.md               # This file
└── src/
    ├── mcp_client_manager.js # Handles MCP connections and tool calls
    ├── gemini_interactor.js  # Interacts with Gemini API
    ├── tool_parser.js        # Parses Gemini's response for tool calls
    ├── prompt_builder.js     # Builds the system prompt for Gemini
    └── main.js               # Main application logic and CLI loop
```

